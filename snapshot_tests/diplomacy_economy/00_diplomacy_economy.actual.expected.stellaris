once {
    federation = {
        resources = {
            category = federation
            upkeep = {
                influence = 1
            }

        }

        trigger = {
            has_federation = yes
        }

    }

}

per_relation {
    rivalry = {
        trigger = {
            has_rival = FROM
        }

        resources = {
            produces = {
                influence = 0.5
            }

            category = rivalries
        }

    }

    harming_relations = {
        resources = {
            category = envoy_costs
            upkeep = {
                influence = 0.25
            }

        }

        trigger = {
            is_harming_relations_with = FROM
            OR = {
                has_policy_flag = diplo_stance_isolationist
                has_policy_flag = diplo_stance_cooperative
            }

        }

    }

    research_agreement = {
        resources = {
            category = research_agreements
            upkeep = {
                influence = 0.25
            }

        }

        trigger = {
            NOT = {
                AND = {
                    has_federation = yes
                    federation = {
                        has_federation_perk = diplomacy_upkeep_1
                    }

                    federation = {
                        any_member = {
                            is_same_value = FROM
                        }

                    }

                }

            }

            has_research_agreement = FROM
        }

    }

    pre_ftl_trade = {
        resources = {
            upkeep = {
                trigger = {
                    NOT = {
                        has_ascension_perk = ap_universal_transactions
                    }

                }

                influence = 0.1
            }

            upkeep = {
                minerals = 5
            }

            category = pre_ftl_trade_pacts
        }

        trigger = {
            from = {
                has_pre_ftl_trade = root
            }

        }

    }

    commercial_pact = {
        trigger = {
            NOT = {
                has_ascension_perk = ap_universal_transactions
            }

            has_commercial_pact = FROM
        }

        resources = {
            category = commercial_pacts
            upkeep = {
                influence = 0.25
            }

        }

    }

    non_aggression_pact = {
        resources = {
            upkeep = {
                influence = 0.25
            }

            category = non_aggression_pacts
        }

        trigger = {
            has_non_aggression_pact = FROM
        }

    }

    diplo_stance_closed_borders = {
        resources = {
            upkeep = {
                influence = 0.25
            }

            category = diplo_closed_borders
        }

        trigger = {
            has_policy_flag = diplo_stance_mercantile
            has_closed_borders = FROM
            NOT = {
                has_rival = FROM
            }

        }

    }

    embassy = {
        trigger = {
            has_active_tradition = tr_diplomacy_diplomatic_networking
            has_embassy = from
        }

        resources = {
            category = diplomatic_networking
            produces = {
                unity = 3
            }

        }

    }

    migration_pact = {
        resources = {
            category = migration_pacts
            upkeep = {
                influence = 0.25
            }

        }

        trigger = {
            has_diplo_migration_treaty = FROM
            NOT = {
                AND = {
                    federation = {
                        has_federation_perk = diplomacy_upkeep_1
                    }

                    federation = {
                        any_member = {
                            is_same_value = FROM
                        }

                    }

                    has_federation = yes
                }

            }

            NOT = {
                AND = {
                    federation = {
                        has_federation_law = free_migration_yes
                    }

                    federation = {
                        any_member = {
                            is_same_value = FROM
                        }

                    }

                    has_federation = yes
                }

            }

        }

    }

    open_technological_enlightenment = {
        trigger = {
            from = {
                is_under_open_technological_enlightenment = root
            }

        }

        resources = {
            upkeep = {
                engineering_research = 5
                society_research = 5
                influence = 0.1
                physics_research = 5
            }

            category = open_technological_enlightenment_pacts
        }

    }

    defensive_pact = {
        trigger = {
            has_defensive_pact = FROM
        }

        resources = {
            category = defensive_pacts
            upkeep = {
                influence = 1
            }

        }

    }

    societal_enlightenment = {
        resources = {
            category = societal_enlightenment_pacts
            upkeep = {
                unity = 5
                influence = 0.1
            }

        }

        trigger = {
            from = {
                is_under_societal_enlightenment = root
            }

        }

    }

    improving_relations = {
        resources = {
            upkeep = {
                influence = 0.25
            }

            category = envoy_costs
        }

        trigger = {
            OR = {
                has_policy_flag = diplo_stance_isolationist
                has_policy_flag = diplo_stance_belligerent
                has_policy_flag = diplo_stance_supremacist
            }

            is_improving_relations_with = FROM
        }

    }

    stratified_technological_enlightenment = {
        resources = {
            upkeep = {
                physics_research = 3
                influence = 0.1
                society_research = 3
                engineering_research = 3
            }

            category = stratified_technological_enlightenment_pacts
        }

        trigger = {
            from = {
                is_under_stratified_technological_enlightenment = root
            }

        }

    }

    guarantee = {
        trigger = {
            is_guaranteeing = FROM
        }

        resources = {
            upkeep = {
                influence = 0.5
            }

            category = guarantees
        }

    }

}

