energy_expenditure_buffer {
    potential = {
        always = yes
    }

    resource = energy
    weight = {
        weight = 0.1
    }

    category = buffer
    type = expenditure
}

energy_expenditure_trade {
    weight = {
        weight = 0.5
    }

    type = expenditure
    category = trade
    potential = {
        has_resource = {
            type = energy
            amount > 5000
        }

    }

    resource = energy
}

energy_expenditure_terraforming {
    potential = {
        has_technology = tech_terrestrial_sculpting
    }

    resource = energy
    weight = {
        modifier = {
            factor = 0.5
            end_game_years_passed > 0
        }

        modifier = {
            factor = 1.5
            OR = {
                has_ascension_perk = ap_machine_worlds
                has_ascension_perk = ap_hive_worlds
                AND = {
                    any_system_within_border = {
                        any_system_planet = {
                            OR = {
                                AND = {
                                    is_planet_class = pc_nuked
                                    root = {
                                        NOT = {
                                            ideal_planet_class = pc_nuked
                                        }

                                    }

                                }

                                has_modifier = terraforming_candidate
                            }

                        }

                    }

                    has_technology = tech_climate_restoration
                }

                AND = {
                    has_ascension_perk = ap_detox
                    any_system_within_border = {
                        any_system_planet = {
                            has_modifier = toxic_terraforming_candidate
                        }

                    }

                }

            }

        }

        weight = 0.3
    }

    desired_max = {
        base = 20000
    }

    type = expenditure
    category = terraforming
}

energy_expenditure_decisions {
    desired_max = {
        base = 2000
    }

    potential = {
        has_resource = {
            type = energy
            amount > 5000
        }

    }

    resource = energy
    type = expenditure
    category = decisions
    weight = {
        weight = 0.2
    }

}

energy_expenditure_colonies {
    weight = {
        weight = 1.5
    }

    potential = {
        OR = {
            has_civic = civic_corporate_dominion
            has_civic = civic_private_prospectors
        }

        ai_colonize_plans > 0
    }

    type = expenditure
    resource = energy
    desired_max = {
        base = 500
    }

    category = colonies
}

energy_expenditure_trade_deficit {
    potential = {
        has_resource = {
            type = energy
            amount > 500
        }

        OR = {
            AND = {
                has_monthly_income = {
                    resource = minerals
                    value < -1
                }

                has_resource = {
                    type = minerals
                    amount < 1000
                }

            }

            AND = {
                has_resource = {
                    type = food
                    amount < 500
                }

                has_monthly_income = {
                    resource = food
                    value < -1
                }

            }

            AND = {
                has_resource = {
                    amount < 500
                    type = consumer_goods
                }

                has_monthly_income = {
                    resource = consumer_goods
                    value < -1
                }

            }

            AND = {
                has_monthly_income = {
                    resource = alloys
                    value < -1
                }

                has_resource = {
                    amount < 500
                    type = alloys
                }

            }

        }

    }

    resource = energy
    type = expenditure
    weight = {
        weight = 0.7
    }

    category = trade
}

energy_expenditure_planets_gaia_seeder {
    category = planets
    weight = {
        weight = 0.2
    }

    type = expenditure
    resource = energy
    potential = {
        any_owned_planet = {
            is_artificial = no
            NOR = {
                is_planet_class = pc_gaia
                is_planet_class = pc_city
                is_planet_class = pc_hive
                is_planet_class = pc_machine
            }

        }

        is_idyllic_bloom_empire = yes
        resource_stockpile_compare = {
            resource = energy
            value > 2000
        }

    }

}

energy_upkeep_country {
    weight = {
        weight = 1
        modifier = {
            factor = 1.25
            resource_income_compare = {
                value > 1000
                resource = energy
            }

        }

        modifier = {
            factor = 1.5
            resource_income_compare = {
                value > 2000
                resource = energy
            }

        }

    }

    category = country
    type = upkeep
    resource = energy
    potential = {
        always = yes
    }

}

energy_expenditure_deposit_blockers {
    potential = {
        any_owned_planet = {
            num_uncleared_blockers > 0
        }

    }

    category = deposit_blockers
    weight = {
        weight = 0.3
        modifier = {
            any_owned_planet = {
                num_free_districts = {
                    type = any
                    value < 1
                }

                num_uncleared_blockers > 0
            }

            factor = 5
        }

    }

    type = expenditure
    desired_min = {
        base = 500
    }

    resource = energy
    desired_max = {
        base = 1000
    }

}

energy_expenditure_megastructures {
    resource = energy
    potential = {
        is_country_type = default
        is_at_war = no
        any_owned_megastructure = {
            OR = {
                is_megastructure_type = gateway_0
                is_megastructure_type = gateway_ruined
            }

        }

        has_technology = tech_gateway_activation
        has_resource = {
            type = energy
            amount > 6000
        }

    }

    weight = {
        weight = 0.5
    }

    desired_max = {
        base = 6000
    }

    type = expenditure
    category = megastructures
}

energy_upkeep_armies {
    resource = energy
    category = armies
    weight = {
        weight = 0.05
    }

    type = upkeep
    potential = {
        always = yes
    }

}

energy_upkeep_buffer {
    type = upkeep
    potential = {
        always = yes
    }

    resource = energy
    weight = {
        weight = 0.01
    }

    category = buffer
}

